pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--------------------
-- toothpick game -- 
--------------------

-- global variables 
background_color = 1
center = 64
height = 30
spacing = 9
players ={[0]=1, 2}
player_colors = {8, 12}

function draw_line(x,i)
	rectfill(x+0,64-height/2,x+1,64+height/2, 7)
	if i <= 9 then
		print(i,x-1,64-height+3)
	else 
		print(i,x-2,64-height+3)
	end
end

function draw_arrow(i)
	spr(0+flr(t()*3)%2,spacing*i-3,64+height-10)
end

function draw_toothpicks(n)
	for i = 1,n do
		draw_line(spacing*i,i)
	end
end

function _init()
	n_0 = rnd({8,9,10,11,12,13})
	selected_toothpick = n_0
	n = n_0
	k = 0 -- index of player
	game_over = false
end 

function _update()
	-- buttons have the following indices 
	-- 0: ‚¨ÖÔ∏è 1: ‚û°Ô∏è 2: ‚¨ÜÔ∏è 3: ‚¨áÔ∏è 4: üÖæÔ∏è 5: ‚ùé	
	if not game_over then
		current_player = players[k]
		player_color = player_colors[current_player]
		if btnp(‚¨ÖÔ∏è) then
			legal_move = selected_toothpick >= n and selected_toothpick > 1
			if legal_move then
				selected_toothpick -= 1
			end
		end
		if btnp(‚û°Ô∏è) then
			legal_move = selected_toothpick <= n-1
			if legal_move then
				selected_toothpick += 1
			end
		end
		if btnp(‚ùé) then
			n = selected_toothpick - 1
			selected_toothpick = n
			k = (k+1) % 2 -- switch player
		end
		if n == 0 then
			game_over = true
		end
	else -- game over 
		if btnp(0) or btnp(1) or btnp(2) or btnp(3) or btnp(4) or btnp(5) then
			_init()
		end
	end 
end	
	
function _draw()
	cls(background_color) -- fills screen with background color		
	if not game_over then
		print("player "..current_player,50,100,player_color)
		draw_toothpicks(n)
		draw_arrow(selected_toothpick)
	else
		cls(background_color) -- fills screen with background color		
		print("game over",64-17,64,7)
		print("player "..current_player.." won!",64-23,64+10,player_color)
		print("press any key to restart",4,120,7)
	end
end
__gfx__
00066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66066066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000770000000777000000777000000707000000777000000700000000777000000777000000777000000000000000000000000000000000000000000000
00000000070000000007000000007000000707000000700000000700000000007000000707000000707000000000000000000000000000000000000000000000
00000000070000000777000000077000000777000000777000000777000000007000000777000000777000000000000000000000000000000000000000000000
00000000070000000700000000007000000007000000007000000707000000007000000707000000007000000000000000000000000000000000000000000000
00000000777000000777000000777000000007000000777000000777000000007000000777000000007000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000077000000077000000077000000077000000077000000077000000077000000077000000077000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000888800000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000008888880000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000088888888000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

